replicas: 1

service:
  enabled: true
  type: ClusterIP
  port: 80
  targetPort: 3000
  annotations: {}
  labels: 
    app.kubernetes.io/name: grafana
    app.kubernetes.io/component: app
  portName: service

envValueFrom:
  GF_SMTP_USER:
    secretKeyRef:
      name: grafana-smtp-creds
      key: user
  GF_SMTP_PASSWORD:
    secretKeyRef:
      name: grafana-smtp-creds
      key: password

resources: {}
#  limits:
#    cpu: 100m
#    memory: 128Mi
#  requests:
#    cpu: 100m
#    memory: 128Mi

# https://grafana.com/docs/grafana/next/setup-grafana/configure-grafana/#smtp
grafana.ini:
  server:
    domain: grafana.kube-prod-d1.mclacken.net
  auth.ldap:
    enabled: true
    allow_sign_up: true
    config_file: /etc/grafana/ldap.toml
  smtp:
    enabled: true
    host: smtp.fastmail.com:587
    from_address: grafana@mclacken.net
    from_name: Grafana
    startTLS_policy: RequireStartTLS

persistence:
  enabled: true
  type: pvc
  storageClassName: longhorn
  volumeName: ""
  accessModes:
    - ReadWriteOnce
  size: 1Gi
  # annotations: {}
  finalizers:
    - kubernetes.io/pvc-protection
  extraPvcLabels: {}
  disableWarning: false

  inMemory:
    enabled: false
    sizeLimit: 300Mi

  ## If 'lookupVolumeName' is set to true, Helm will attempt to retrieve
  ## the current value of 'spec.volumeName' and incorporate it into the template.
  lookupVolumeName: true

# adminUser: admin
# adminPassword: strongpassword

admin:
  existingSecret: admin-secret
  userKey: username
  passwordKey: password

ldap:
  enabled: true
  existingSecret: "ldap-config"

imageRenderer:
  replicas: 1
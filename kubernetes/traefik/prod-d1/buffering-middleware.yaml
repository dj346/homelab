apiVersion: traefik.io/v1alpha1
kind: Middleware
metadata:
  name: buffering-middleware
  namespace: traefik
spec:
  buffering:
    maxRequestBodyBytes: 21474836480    # 20 GB
    memRequestBodyBytes: 10485760       # 10 MB (in-memory buffer per request chunk)
    maxResponseBodyBytes: 10485760
    memResponseBodyBytes: 10485760
    retryExpression: "IsNetworkError()"
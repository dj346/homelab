global:
  priorityClassName: null
  clusterDomain: 'cluster.local'


overrides:
  defaults:
    metrics_generator:
      processors:
        - service-graphs
        - span-metrics
        - local-blocks
    global:
      max_bytes_per_trace: 50000000
      max_traces_per_user: 30000


tempo:
  podLabels: {}
  podAnnotations: {}

  extraArgs:
    - "-config.expand-env=true"

  extraEnvFrom:
    - secretRef:
        name: tempo-s3-credentials
  
  memberlist:
    service:
      annotations: {}

serviceAccount:
  annotations: {}

storage:
  trace:
    backend: s3
    s3:
      access_key: "${AWS_ACCESS_KEY_ID}"
      secret_key: "${AWS_SECRET_ACCESS_KEY}"
      bucket: tempo-traces
      endpoint: minio:80
      region: us-west-1
      insecure: true
      forcepathstyle: true

traces:
  otlp:
    http:
      enabled: true
    grpc:
      enabled: true
  # zipkin:
  #   enabled: true
  # jaeger:
  #   thriftCompact:
  #     enabled: true
  #   thriftHttp:
  #     enabled: true
  # opencensus:
  #   enabled: true

ingester:
  annotations: {}
  replicas: 3

  extraArgs:
    - "-config.expand-env=true"

  extraEnvFrom:
    - secretRef:
        name: tempo-s3-credentials

  autoscaling:
    enabled: false
    minReplicas: 2
    maxReplicas: 3
    
  priorityClassName: null
  podLabels: {}
  podAnnotations: {}

  resources: {}
  
  persistence:
    enabled: true
    inMemory: false
    size: 1Gi
    storageClassName: "longhorn"
    storageClass: null
    annotations: {}
    labels: {}

  service:
    annotations: {}
    
  zoneAwareReplication:
    enabled: false
    
    zones:
      - name: zone-a
        storageClass: null
      - name: zone-b
        storageClass: null
      - name: zone-c
        storageClass: null

metricsGenerator:
  enabled: true
  kind: Deployment
  annotations: {}
  replicas: 1
  
  priorityClassName: null
  podLabels: {}
  podAnnotations: {}
  
  resources: {}

  extraArgs:
    - "-config.expand-env=true"

  extraEnvFrom:
    - secretRef:
        name: tempo-s3-credentials
  
  maxUnavailable: 1
  
  persistence:
    enabled: true
    size: 1Gi
    storageClassName: "longhorn"
    storageClass: null
    annotations: {}
    labels: {}
  
  ports:
    - name: grpc
      port: 9095
      service: true
    - name: http-memberlist
      port: 7946
      service: false
    - name: http-metrics
      port: 3100
      service: true
  
  config:
    registry:
      collection_interval: 15s
      external_labels: {}
      stale_duration: 15m
    processor:
      service_graphs:
        dimensions: []
        histogram_buckets: [0.1, 0.2, 0.4, 0.8, 1.6, 3.2, 6.4, 12.8]
        max_items: 10000
        wait: 10s
        workers: 10
      span_metrics:
        dimensions: []
        histogram_buckets: [0.002, 0.004, 0.008, 0.016, 0.032, 0.064, 0.128, 0.256, 0.512, 1.02, 2.05, 4.10]
      local_blocks:
        filter_server_spans: false
        flush_to_storage: true
    
  service:
    annotations: {}

distributor:
  replicas: 1

  config:
    log_received_spans:
      enabled: true
    log_discarded_spans:
      enabled: true

  extraArgs:
    - "-config.expand-env=true"

  extraEnvFrom:
    - secretRef:
        name: tempo-s3-credentials
  
  autoscaling:
    enabled: false
    minReplicas: 1
    maxReplicas: 3

  service:
    annotations: {}
    labels: {}
    
  serviceDiscovery:
    annotations: {}
    labels: {}

  priorityClassName: null

  podLabels: {}
  podAnnotations: {}

  resources: {}
  
compactor:
  replicas: 1

  extraArgs:
    - "-config.expand-env=true"

  extraEnvFrom:
    - secretRef:
        name: tempo-s3-credentials

  autoscaling:
    enabled: false
    minReplicas: 1
    maxReplicas: 3
    
  priorityClassName: null
  podLabels: {}
  podAnnotations: {}
  
  resources: {}
  
  service:
    annotations: {}
  
querier:
  replicas: 1

  extraArgs:
    - "-config.expand-env=true"

  extraEnvFrom:
    - secretRef:
        name: tempo-s3-credentials
  
  autoscaling:
    enabled: false
    minReplicas: 1
    maxReplicas: 3
    
  priorityClassName: null
  podLabels: {}
  podAnnotations: {}
  
  resources: {}
  
  service:
    annotations: {}

queryFrontend:
  query:
    enabled: false
    resources: {}
    
  extraArgs:
    - "-config.expand-env=true"

  extraEnvFrom:
    - secretRef:
        name: tempo-s3-credentials

  replicas: 1
  
  autoscaling:
    enabled: false
    minReplicas: 1
    maxReplicas: 3
    
  service:
    port: 16686
    annotations: {}
    labels: {}
    
  serviceDiscovery:
    annotations: {}
    labels: {}
  
  ingress:
    enabled: false
    annotations: {}

    # hosts:
    #   - host: query.tempo.example.com
    #     paths:
    #       - path: /
    # tls:
    #   - secretName: tempo-query-tls
    #     hosts:
    #       - query.tempo.example.com

  priorityClassName: null
  podLabels: {}
  podAnnotations: {}
  
  resources: {}
  
multitenancyEnabled: false

rollout_operator:
  enabled: false

server:
  httpListenPort: 3100
  logLevel: info
  logFormat: logfmt
  

memcached:
  enabled: true
  
  replicas: 1
  
  podLabels: {}
  podAnnotations: {}
  resources: {}
  
  service:
    annotations: {}

memcachedExporter:
  enabled: false
  
  resources: {}

metaMonitoring:
  serviceMonitor:
    enabled: false
    namespace: null
    namespaceSelector: {}
    annotations: {}
    labels: {}

  grafanaAgent:
    enabled: false
    installOperator: false

    namespace: ''

    labels: {}
    annotations: {}

prometheusRule:
  enabled: false
  namespace: null
  annotations: {}
  labels: {}
  
minio:
  enabled: false
#   rootUser: grafana-tempo
#   rootPassword: supersecret
#   buckets:
#     - name: tempo-traces
#       policy: none
#       purge: false
#     - name: enterprise-traces
#       policy: none
#       purge: false
#     - name: enterprise-traces-admin
#       policy: none
#       purge: false
#   persistence:
#     size: 5Gi
#   resources:
#     requests:
#       cpu: 100m
#       memory: 128Mi
#   configPathmc: '/tmp/minio/mc/'

gateway:
  enabled: true
  replicas: 1
  
  autoscaling:
    enabled: false
    minReplicas: 1
    maxReplicas: 3
    
  verboseLogging: true
  
  priorityClassName: null
  podLabels: {}
  annotations: {}
  podAnnotations: {}
  
  resources: {}
  
  maxUnavailable: 1
  
  service:
    port: 80
    type: ClusterIP
    clusterIP: null
    nodePort: null
    loadBalancerIP: null
    annotations: {}
    labels: {}
    
  ingress:
    enabled: false
    labels: {}
    
    annotations: {}

    # hosts:
    #   - host: gateway.tempo.example.com
    #     paths:
    #       - path: /
    # tls:
    #   - secretName: tempo-gateway-tls
    #     hosts:
    #       - gateway.tempo.example.com

  basicAuth:
    enabled: false
    username: null
    password: null

ingress:
  enabled: false
  annotations: {}
  paths:
    distributor:
      - path: /v1/traces
        port: 4318
      - path: /distributor/ring
        # -- pathType (e.g. ImplementationSpecific, Prefix, .. etc.) might also be required by some Ingress Controllers
        # pathType: Prefix
      - path: /ingester/ring
      - path: /metrics-generator/ring
    ingester:
      - path: /flush
      - path: /shutdown
    query-frontend:
      - path: /api
    compactor:
      - path: /compactor/ring
  hosts:
    - tempo.example.com

provisioner:
  enabled: false

  labels: {}
  annotations: {}
  
  priorityClassName: null
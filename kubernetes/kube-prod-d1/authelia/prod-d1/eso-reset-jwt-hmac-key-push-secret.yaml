apiVersion: external-secrets.io/v1alpha1
kind: PushSecret
metadata:
  name: authelia-eso-session-encryption-key-generator
  namespace: authelia-prod-d1
  labels:
    app.kubernetes.io/name: authelia
    app.kubernetes.io/component: program-secret
    app.kubernetes.io/instance: authelia-prod-d1
    app.kubernetes.io/managed-by: argocd
spec:
  refreshInterval: "0"
  updatePolicy: Replace
  deletionPolicy: None

  secretStoreRefs:
    - kind: ClusterSecretStore
      name: eso-vault-store

  selector:
    generatorRef:
      apiVersion: generators.external-secrets.io/v1alpha1
      kind: Password
      name: authelia-eso-reset-jwt-hmac-key-generator

  data:
    - match:
        secretKey: password
        remoteRef:
          remoteKey: authelia/prod-d1/reset-jwt-hmac-key
          property: key
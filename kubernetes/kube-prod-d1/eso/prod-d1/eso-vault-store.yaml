apiVersion: external-secrets.io/v1
kind: ClusterSecretStore
metadata:
  name: eso-vault-store
  namespace: eso
spec:
  provider:
    vault:
      server: "https://openbao-application-0-hs-openbao-application-internal.openbao.kube-prod-d1i.mclacken.net:8200"
      path: "kube-prod-d1"
      version: "v2"
      checkAndSet:
        required: true
      tls:
        certSecretRef:
          name: "eso-vault-certificate-secret"
          key: "tls.crt"
          namespace: "eso"
        keySecretRef:
          name: "eso-vault-certificate-secret"
          key: "tls.key"
          namespace: "eso"
      auth:
        kubernetes:
          mountPath: "kubernetes"
          role: "eso-kube-prod-d1"
          serviceAccountRef:
            name: "eso-issuer-service-account"
            namespace: "eso"
            audiences:
              - "eso-vault-auth"
        # cert:
        #   clientCert:
        #     name: "eso-vault-certificate-secret"
        #     key: "tls.crt"
        #     namespace: "eso"
        #   secretRef:
        #     name: "eso-vault-certificate-secret"
        #     key: "tls.key"
        #     namespace: "eso"
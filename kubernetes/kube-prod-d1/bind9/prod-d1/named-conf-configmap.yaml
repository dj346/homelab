apiVersion: v1
kind: ConfigMap
metadata:
  name: bind-config
data:
  named.conf.local: |
    //
    // Do any local configuration here
    //

    // Consider adding the 1918 zones here, if they are not used in your
    // organization
    //include "/etc/bind/zones.rfc1918";

  named.conf.options: |
    acl "trusted" {
      10.15.21.0/24; // Management subnet (168.192.in-addr.arpa)
      10.15.22.0/24; // Main subnet  (1.168.192.in-addr.arpa)
      172.21.0.0/16; // Docker subnet
      10.11.12.0/24; // Moms subnet
    };

    options {
            directory "/var/cache/bind";
            version none;
            recursion yes;
            allow-query { trusted; };
            dnssec-validation auto;
            allow-transfer { none; };
            auth-nxdomain no;
            listen-on-v6 { any; };
            allow-recursion { trusted; };  # allows recursive queries from "trusted" clients
            forwarders {
                    1.1.1.1;
                    1.0.0.1;
            };
    };

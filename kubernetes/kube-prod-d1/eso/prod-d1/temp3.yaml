apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: ica2-ca
  namespace: apps
spec:
  refreshInterval: 1h
  target:
    name: ica2-ca
    template:
      type: Opaque
      data:
        # One of these will be correct depending on ESO version/behavior.
        # Start with `.raw`; if the Secret ends up empty, switch to `.value`.
        ca.crt: "{{ .raw }}"
  dataFrom:
    - sourceRef:
        generatorRef:
          apiVersion: generators.external-secrets.io/v1alpha1
          kind: VaultDynamicSecret
          name: ica2-ca-pem

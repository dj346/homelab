# # Usage:
# #     mkdir -p ~/archivebox/data && cd ~/archivebox
# #     curl -fsSL 'https://docker-compose.archivebox.io' > docker-compose.yml
# #     docker compose run archivebox version
# #     docker compose run archivebox config --set SAVE_ARCHIVE_DOT_ORG=False
# #     docker compose run archivebox add --depth=1 'https://news.ycombinator.com'
# #     docker compose run -T archivebox add < bookmarks.txt
# #     docker compose up -d && open 'https://localhost:8000'
# #     docker compose run archivebox help
# # Documentation:
# #     https://github.com/ArchiveBox/ArchiveBox/wiki/Docker#docker-compose

# services:
#     archivebox:
#         image: archivebox/archivebox:latest
#         ports:
#             - 8000:8000
#         volumes:
#             - ./data:/data
#         environment:
#             # - ADMIN_USERNAME=admin            # creates an admin user on first run with the given user/pass combo
#             # - ADMIN_PASSWORD=SomeSecretPassword
#             - ALLOWED_HOSTS=*                   # set this to the hostname(s) you're going to serve the site from!
#             - CSRF_TRUSTED_ORIGINS=http://localhost:8000  # you MUST set this to the server's URL for admin login and the REST API to work
#             - PUBLIC_INDEX=True                 # set to False to prevent anonymous users from viewing snapshot list
#             - PUBLIC_SNAPSHOTS=True             # set to False to prevent anonymous users from viewing snapshot content
#             - PUBLIC_ADD_VIEW=False             # set to True to allow anonymous users to submit new URLs to archive
#             - SEARCH_BACKEND_ENGINE=sonic       # tells ArchiveBox to use sonic container below for fast full-text search
#             - SEARCH_BACKEND_HOST_NAME=sonic
#             - SEARCH_BACKEND_PASSWORD=SomeSecretPassword
            
#     sonic:
#         image: archivebox/sonic:latest
#         expose:
#             - 1491
#         environment:
#             - SEARCH_BACKEND_PASSWORD=SomeSecretPassword
#         volumes:
#             - ./data/sonic:/var/lib/sonic/store

#     novnc:
#         image: theasp/novnc:latest
#         environment:
#             - DISPLAY_WIDTH=1920
#             - DISPLAY_HEIGHT=1080
#             - RUN_XTERM=no
#         ports:
#             # to view/control ArchiveBox's browser, visit: http://127.0.0.1:8080/vnc.html
#             # restricted to access from localhost by default because it has no authentication
#             - 8080:8080

#     ## Run ChangeDetection.io to watch for changes to websites, then trigger ArchiveBox to archive them
#     # Documentation: https://github.com/dgtlmoon/changedetection.io
#     # More info: https://github.com/dgtlmoon/changedetection.io/blob/master/docker-compose.yml

#     changedetection:
#       image: ghcr.io/dgtlmoon/changedetection.io
#       volumes:
#         - ./data-changedetection:/datastore


#     ## Run PYWB in parallel and auto-import WARCs from ArchiveBox
#     pywb:
#         image: webrecorder/pywb:latest
#         entrypoint: /bin/sh -c '(wb-manager init default || test $$? -eq 2) && wb-manager add default /archivebox/archive/*/warc/*.warc.gz; wayback;'
#         environment:
#             - INIT_COLLECTION=archivebox
#         ports:
#             - 8686:8080
#         volumes:
#             - ./data:/archivebox
#             - ./data/wayback:/webarchive
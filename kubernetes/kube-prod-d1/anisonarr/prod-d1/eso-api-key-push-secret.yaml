apiVersion: external-secrets.io/v1alpha1
kind: PushSecret
metadata:
  name: anisonarr-eso-api-key-push-secret
  namespace: anisonarr-prod-d1
spec:
  refreshInterval: "0"
  updatePolicy: Replace
  deletionPolicy: None

  secretStoreRefs:
    - kind: ClusterSecretStore
      name: eso-vault-store

  selector:
    generatorRef:
      apiVersion: generators.external-secrets.io/v1alpha1
      kind: ClusterGenerator
      name: anisonarr-eso-api-key-cluster-generator

  data:
    - match:
        secretKey: password          # generator output key is "password"
        remoteRef:
          remoteKey: anisonarr/prod-d1/apikey
          property: apiKey
